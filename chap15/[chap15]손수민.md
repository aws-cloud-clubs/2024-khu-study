# Chap 15. 구글 드라이브 설계

### 1단계: 문제 이해 및 설계 범위 확정

- 파일 추가: Drag-and-drop
- 파일 다운로드
- 여러 단말에 파일 동기화
- 파일 갱신 이력 조회
- 파일 공유
- 파일이 편집되거나 삭제되거나 새롭게 공유되었을 때 알림 표시

### 2단계: 개략적 설계안 제시 및 동의 구하기

![image](https://github.com/user-attachments/assets/1d523a95-6de0-40cb-9cf5-bc1af40b9bbf)

### 3단계: 상세 설계

**블록 저장소 서버**
- Delta sync: 파일이 수정되면 전체 파일 대신 수정이 일어난 블록만 동기화
- Compression: 블록 단위로 압축해 두면 데이터 크기를 많이 줄일 수 있다.

**높은 일관성 요구사항**
- Strong consistency
    - 캐시에 보관된 사본과 데이터베이스에 있는 원본(master)이 일치한다.
    - 데이터베이스에 보관된 원본에 변경이 발생하면 캐시에 있는 사본을 무효화한다.

**저장소 공간 절약**
- 중복 제거(de-dupe)
- 지능적 개업 전략
    - 한도 설정
    - 중요한 버전만 보관
- 자주 쓰이지 않는 데이터는 아카이빙 저장소로 옮긴다.

### 4단계: 마무리

- 분할, 압축, 암호화 로직을 클라이언트에 두어야 하므로 플랫폼별로 따로 구현해야 한다.
- 클라이언트가 해킹 당할 가능성이 있으므로 암호화 로직을 클라이언트 안에 두는 것은 적절치 않은 선택일 수 있다.

