# 분산 시스템을 위한 유일 ID 생성기 설계

## 분산 시스템에서 사용될 수 있는 ID

### 다중 마스터 복제(multi-master replication)
auto_increment 기능을 이용한 방식. 다만 1씩 증가시키는것이 아니라 k씩 증가시킨다. k는 분산된 서버의 개수이다.

이 방식은 여러가지 단점들이 있다.
- 규모를 늘리기가 어렵다.
- ID값이 시간의 흐름에 맞추어 커지도록 보장할 수 없다.
- 서버 추가, 삭제가 어렵다.
  
### UUID(Universally Unique Identifier)
유일성이 보장되는 128비트짜리 수이다. 충돌 가능성이 지극히 낮다.

장점
- 생성이 단순하고 서버간 조율이 필요 없다.
- 규모 확장도 쉽다.

단점
- 길이가 길다. (128비트)
- 시간순 정렬이 불가능하다.
- 숫자가 아닌 값이 ID에 포함될 수 있다.

### 티켓 서버(ticket server)

auto_increment 기능을 갖춘 데이터베이스를 하나만 사용하고 여러 서버에서 이 서버에 ID를 요청하는 방식이다. 

장점
- 구현이 쉽다.
- 유일성과 정렬이 가능한, 오직 숫자로만 구성된 ID를 쉽게 만들 수 있다.

단점
- 티켓 서버가 고장나면 전체 시스템에 장애가 발생한다(Single-Point-of-Failure). 

### 트이터 스노플레이크(twitter snowflake)

ID를 여러 section으로 분할한다. 앞부분에 타임스탬프룰 두어서 시간순 정렬이 가능하게 하고, 
뒷부분에 데이터센터 ID, 서버 ID, 일련번호를 두어 서버별 유일하게 식별이 가능하도록 한다.
