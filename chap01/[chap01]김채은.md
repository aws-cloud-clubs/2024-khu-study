# Chp01_사용자 수에 따른 규모 확장성

### 데이터베이스

1. 관계형 데이터베이스(relational database)
    1. 정보를 전통적인 표(table)와 열(column)으로 저장한다.
        1. 표에 있는 항목은 고유한 식별자로 구분될 수 있다. 
    2. relational이라는 단어는 독립적인 표들간의 매개/관계라는 의미
        1. 정보를 표로 표현한 것들의 관계(relation)를 고유식별자를 이용해서 또다시 표로 표현
        2. ex: 유저정보와 영화정보같은 독립적인 표들과 그들의 rating 관계 
        → 유저의 고유식별자&영화의 고유식별자를 이용해서 누가 어떤 영화에 몇 점을 주었는지에 대한 관계를 또다시 표로 표현
    3. 1970년대에 IBM이 메인프레임 데이터베이스를 지원하기 위해 개발한 언어인 SQL 사용하여 작성, 읽기 및 조
2. 비-관계형 데이터베이스(NoSQL database)
    1. 키-값 저장소(key-value store)/그래프 저장소(graph store)/칼럼 저장소(column store)/문서 저장소(document store)
    
    <aside>
    🐳 클라우드 컴퓨팅 중간발표할 때 왜 MongoDB를 쓰냐는 질문을 받았었다… 거기서 횡설수설하다가(저희가 아직 수준이 낮아서~~) 결론은 러닝커브가 낮아서였는데… 그러기보다 이렇게 대답했으면 더 좋았을 것 같다.
    
    </aside>
    
    - 아주 낮은 응답 지연시간(latency)가 요구될 때
    - 다루는 데이터가 비정형(unstructured)이라 관계형 데이터가 아닐 때
        1. 비정형 데이터 : 소셜 데이터의 텍스트, 이미지, 영상, 워드나 PDF 문서와 같은 멀티미디어 데이터
            1. 비정형 데이터에는 구조를 가질 수 있는 일부 관련 메타데이터가 포함될 수는 있다. 헷갈리면 안된다. 
            2. ex: 동영상에는 동영상 해상도, 비트 전송률, FPS(초당 프레임 수), 동영상 소유자 등의 메타데이터가 포함될 수 있다. 그러나 동영상 자체는 비정형 데이터이다.
    - 데이터(JSON, yaml, XML 등)를 직렬화(serialize) 역직렬화(deserialize)할 수 있기만 하면 될 때
        1. = 데이터를 구조화할 필요가 없을 때
        2. 데이터 직렬화 : 메모리를 디스크에 저장하거나 네트워크 통신에 사용하기 위한 형식으로 변환하는 것
    - 아주 많은 양의 데이터를 저장할 필요가 있을 때

### 로드밸런서

1. load balancing set에 속한 웹 서버들에게 트래픽 부하를 고르게 분산하는 역할 
2. 웹계층의 가용성 확보

### 데이터베이스 다중화

1. 데이터 원본은 주(master) 서버에, 사본은 부(slave) 서버에
2. 데이터 계층의 가용성 확보 
3. 질의(query) 병렬 처리로 성능 확보

### 캐시

1. 애플리케이션의 성능은 데이터베이스를 얼마나 자주 호출하느냐에 크게 좌우되므로 데이터를 잠시 보관함으로써 응답시간(latency) 확보
    1. 값비싼 연산 결과/자주 참조되는 데이터를 휘발성 메모리 안에 둔다.

### 무상태(stateless) 웹 계층

1. 상태 정보는 웹 서버로부터 물리적으로 분리되어 공유저장소(shared storage)에 저장된다.
    1. = 세션 데이터를 웹 계층에서 분리하여 지속성 데이터 보관소에 저장했다. 
2. 웹 서버는 클라이언트 정보(상태)를 유지할 필요가 없으므로 어느 웹서버로 사용자의 HTTP 요청이 전달되어도 상관 없다. 어차피 공유저장소에서 빼올 것이므로. 

<aside>
🐳 만약 왜 공유 저장소를 NoSQL로 쓰셨나요? 라고 질문하면
**규모 확장이 간편해서요.**
라고 답하자.

</aside>

### 메시지 큐

1. 무손실(durability)를 보장하는 비동기 통신(asynchronous communication)을 지원하는 컴포넌트
    1. = 메시지의 버퍼 역할을 하며, 메시지를 비동기적으로 전송한다.
    2. publisher가 메시지를 만들어 메시지 큐에 발행(publish)하고 subscriber가 큐에 있던 메시지를 받아 그에 맞는 동작을 수행한다.
        1. ex : 기상청, 핸드폰의 날씨 앱

<aside>
🐳 시간이 오래 걸릴 수 있는 프로세스는 비동기적으로 처리하자.

</aside>

1. 서버 간 결합이 느슨해진다.

<aside>
🐳 큐의 크기가 커지면 더 많은 작업 프로세스를 추가해야 한다. 
→ 처리해야하는 작업들이 많아질 것이므로.

</aside>

<aside>
🐳 zmq의 pub-sub pattern이 생각났다.

</aside>
